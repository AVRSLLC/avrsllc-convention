# avrsllc-convention

# Руководство по стилю проекта UE5, создано Advanced VR Solutions.

Данное руководство основанно на переводе общей конвенции [ShadowPKx](https://github.com/ShadowPKx/ue4-style-guide-rus). В нем представлена более широкая информация по неймингу и логике структуры проектов на Unreal Engine.

## Основные термины

<a name="terms-level-map"></a>
##### Карты/Уровни (Levels/Maps)

Слово 'карта' в основном используется в обозначении слова 'уровень' — эти слова считаются равноценными, аналогично английскими Level и Map. Но в работе будут так же применяться Level Instance, что в свою очередь приводит к тому, что предпочтитель говорить об 'уровнях' и 'экземплярах уровней'. 

<a name="terms-cases"></a>
##### Использование верхнего и нижнего регистра в нейминге ассетов.

Есть несколько разных способов, как называть вещи. Вот самые популярные методики:

> ###### ДельфиСтиль
>
> Каждое слово начинается с большой буквы, а всё слово пишется без пробелов, нижних пробелов, дефисов и т.п. Например: `DesertEagle`, `StyleGuide`, `ASeriesOfWords`.
> 
> ###### верблюжийСтиль
>
> Похож на ДельфиСтиль, но первая буква пишется в нижнем регистре. Например: `desertEagle`, `styleGuide`, `aSeriesOfWords`.
>
> ###### Змеиный_стиль (а.к.а. snake_case)
>
> Использование регистра в начале слов не определено, но слова разделяются нижним пробелом. Например: `desert_Eagle`, `Style_Guide`, `a_Series_of_Words`.

В нашем пайплайне применятеся "Змеиный_стиль", т.е. `Building_Curch`,  `T_Door_Old_D.png`, `S_Terrain_Grass`.


<a name="0"></a>
## 0. Принципы и идеи

<a name="0.1"></a>
### 0.1 Для общего понимания того, как в целом устроены руководства стилей, в частности в UE4\5, рекомендуется ознакомиться с оригинальным текстом в начале этого гайда. Но для работы следует следовать конретно данному гайдлайну.

<a name="0.2"></a>
### 0.2 Вся структура проекта, материалы для разработки, код в любом Unreal Engine проекте должны выглядеть так, будто всё это создано одним человеком — не важно, как много людей на самом деле участвует.

Данное руководство по стилю созданно для того, чтобы повысить продуктивность создателей контента и управляемость проектом с стороны руководства.

<a name="0.3"></a>
### 0.3 Мы помогаем друзьям следовать хорошему стилю

Хорошей практикой является помогать товарищам с поддержанием порядка в проекте согласно гайдлайну.
Если вы видите, что кто-то работает не по руководству стиля, или вовсе без какого-либо — объясните это тому человеку.

При работе в комаде и во время обсуждений в Дискорде или на Зуме постоянство стиля также помогает быстро найти отклик и решение на возникший вопрос или проблему. 

> #### "Никому не хочется рыться в неопознаном нагромождении файлов, разношерстном нейминге мешей и изучать непонятные названия материалов в проекте."

Если вы увидили, что этот кто-то не следует какому-либо руководству стиля, отправьте ему ссылку на этот документ.

<a name="0.4"></a>
### 0.4 Убирайте за собой 

Во время разработки вполне могут возникнуть так назваемые мусорные файлы - старые меши, не актуальные варианты текстур, автоматически созданные материалы от импортированных ресурсов. Все это захламляет проект и навигацию в нем. Старайтесь заниматься очисткой от ненужного сразу(!), не оставляйте все на финальные стадии проекта. Через месяц работы над проектом вы можете просто не вспомнить, что где есть и для чего оно было нужно.

<a name="toc"></a>
## Содержание

> 1. [Соглашение о наименованиях](#anc)
> 1. [Структура папок проекта](#structure)
> 1. [Блюпринты](#bp)

<a name="anc"></a>
<a name="1"></a>
## 1. Соглашение о наименованиях 

Соглашение о наименованиях должно восприниматься как закон. В проекте, следующем соглашению о наименованиях, легко управлять ассетами, искать и обрабатывать их.

В большинстве случаев, ассетам присваивается префикс-аббревиатура на основе названия типа этого ассета + нижний пробел `_`.

<a name="prohibited-languages"></a>
<a name="1.0"></a>
### 1.0 Русский и иные языки (от переводчика)
Использование русских и иных языков в названиях ассетов строго запрещается.

*Не бойтесь пользоваться переводчиком*. Лучше чудаковатое название на английском, нежели написанное транслитом слово `Pchela`, или, того хуже, так и оставленное на русском `Пчела`.
Исключением является использование записи латиницей имен собственных, например `Kazan`, `Alushtinskaya`, `Stariy_Pokrov`.

Суть данного ограничения связана с проблемами не-латинских символов при компиляции проектов, преобразовании и в ходе других внутренних процессов UE4 и сторонних плагинов — такие ошибки будет трудно отловить и исправить, так что лучше не делайте их вообще.

<a name="base-asset-name"></a>
<a name="1.1"></a>
### 1.1 Базовое название - `Префикс_БазовоеНазвание_Вариант_Суффикс`

У каждого ассета должно быть своё _базовое название_. Оно используется как средство логической группировки материалов разработки. Любой ассет, являющийся частью определённой логической группы, должен следовать стандарту  `Префикc_БазовоеНазвание_Вариация_Суффикс`.

Использование схемы `Префикc_БазовоеНазвание_Вариация_Суффикс` с её осознанием уже гарантирует создание "хороших" имён. Вот подробные правила по использованию этой схемы:

* `Префикс` и `Суффикс` определяется типом ассета, исходя из таблиц [Модификаторов имён ассетов](#asset-name-modifiers).
* `Базовое название` определяется коротким и легко отличимым названием касательно предметной области вашей группы ассетов. Например, если у вас есть персонаж Вася, то все ассеты Васи должны содержать `БазовоеНазвание` = `Vasya`.
* Для особенных или уникальных вариантов ассета используйте `Вариант` — короткое и легко различимое имя, отражающее логическую группировку ассетов, образующих подмножество на основе базового имя ассета. Например, если у Васи есть несколько скинов, то у этих скинов должно быть всё то же базовое имя `Vasya`, но также и `Вариант`. "Злой" скин можно назвать `Vasya_Evil`, а скин "Ретро"— `Vasya_Retro`.
* Для уникальных но схожих ассетов, относящихся к одной группе, добавляется нумерующий `Вариант` — двузначное число, нумерация которого начинается с `01`. Например, если ваш художник окружения генерирует валуны, которые нельзя просто так взять и назвать, то их можно назвать как `Rock_01`, `Rock_02`, `Rock_03`, и т.д. За исключением редких случаев, не используйте трёхзначное число. Если у вас более 100 ассетов в одной группе, вам следует разбить её на несколько других, используя другие базовые названия или варианты.
* В зависимости от того, как у вас создаются ассеты, вы можете использовать несколько имён-вариантов, друг за другом. Например, если вы создаёте ассеты для пола, вам будет нужно использовать базовое имя `Flooring` с вариантами вроде `Flooring_Marble_01`, `Flooring_Maple_01`, `Flooring_Tile_Squares_01`.

<a name="1.1-examples"></a>
#### 1.1 Примеры

##### 1.1e1 Здание

| Тип ассета (RU)          |Тип ассета (EN)           | Название ассета                |
| ------------------------ | ------------------------ | ------------------------------ |
| Статичный меш            | Static Mesh              | S_Building                     |
| Материал                 | Material                 | M_Building                     |
| Текстура (Diffuse/Albedo)| Texture (Diffuse/Albedo) | T_Building_D                   |
| Текстура (Normal)        | Texture (Normal)         | T_Building_N                   |
| Текстура (Старый Diffuse)| Texture (Старый Diffuse) | T_Building_Old_D               |

##### 1.1e2 Фонари

| Тип ассета (RU)           | Тип ассета (EN)         | Название ассета                |
| ------------------------- | ----------------------- | ------------------------------ |
| Статичный меш (01)        | Static Mesh (01)        | S_StreetLight_01               |
| Статичный меш (02)        | Static Mesh (02)        | S_StreetLight_02               |
| Статичный меш (03)        | Static Mesh (03)        | S_StreetLight_03               |
| Материал                  | Material                | M_StreetLight                  |
| Экземпляр материала (Снег)| Material Instance (Snow)| MI_StreetLight_Snow            |

### 1.2 Модификаторы имён ассетов

Используйте эту таблицу для [базовых названий](#base-asset-name), когда именуете ассеты.

<a name="anc-common"></a>



| Тип ассета (RU)      | Тип ассета (EN)    | Префикс      | Суффикс    | Примечания                          |
| -------------------- | ------------------ | ------------ | ---------- | ----------------------------------- |
| Уровень              | Level              |              |            |                                     |
| Уровень (освещение)  | Level (Lighting)   |              | _Lighting  |                                     |
| Уровень (запакованный)| Packed Level      | BPP_         |            |                                     |
| Блупринт             | Blueprint          | BP_          |            |                                     |
| Материал             | Material           | M_           |            |Мастер материалы будут имееть префикс MS_|
| Экземпляр материала  | Material Instance  | MI_          |            |                                     |
| Функция материалов   | Material Function  | MF_          |            |                                     |
| Статичный меш        | Static Mesh        | S_           |            |                                     |
| Скелетный меш        | Skeletal Mesh      | SM_          |            |                                     |
| Текстура             | Texture            | T_           | _?         | См. [Текстуры](#anc-textures)       |
| Система частиц       | Particle System    | PS_          |            |                                     |


<a name="anc-materials"></a>
### Материалы

| Тип ассета (RU)               | Тип ассета (En)               | Префикс      | Суффикс | Примечания                |
| ----------------------------- | ----------------------------- | ------------ | ------- | ------------------------- |
| Материал                      | Material                      | M_           |         |                           |
| Материал пост-обработки       | Material (Post Process)       | PP_          |         |                           |
| Функция материалов            | Material Function             | MF_          |         |                           |
| Экземпляр материала           | Material Instance             | MI_          |         |                           |
| Материал Parameter Collection | Material Parameter Collection | MPC_         |         |                           |
| Профиль подповерхности        | Subsurface Profile            | SP_ или SSP_ |         | Выберите одно. Лучше SP_ |
| Физический материал           | Physical Materials            | PM_          |         |                           |

<a name="anc-textures"></a>
### Текстуры 
| Тип ассета (RU)                  | Тип ассета (EN)             | Префикс      | Суффикс    | Примечания                       |
| -------------------------------- | --------------------------- | ------------ | ---------- | -------------------------------- |
| Текстура                         | Texture                     | T_           |            |                                  |
| Текстура (Diffuse/Альбедо/Основной цвет)| Texture (Diffuse/Albedo/Base Color)| T_ | _D      |                                  |
| Текстура (Нормаль)               | Texture (Normal)            | T_           | _N         |                                  |
| Текстура (Грубость)              | Texture (Roughness)         | T_           | _R         |                                  |
| Текстура (Металлик)              | Texture (Metallic)          | T_           | _M         |                                  |
| Текстура (Alpha/Прозрачность)    | Texture (Alpha/Opacity)     | T_           | _A         |                                  |
| Текстура (Нейтральный свет)      | Texture (Ambient Occlusion) | T_           | _O или _AO | Выберите одно. Лучше _O          |
| Текстура (Неровность)            | Texture (Bump)              | T_           | _B         |                                  |
| Текстура (Излучение)             | Texture (Emissive)          | T_           | _E         |                                  |
| Текстура (Маска)                 | Texture (Mask)              | T_           | _Mask      |                                  |
| Текстура (Блеск)                 | Texture (Specular)          | T_           | _S         |                                  |
| Текстура (упакованная)           | Texture (Packed)            | T_           | _*         | См. примечание об упаковке текстур ниже. |


#### Упаковка текстур
Упаковка сразу нескольких слоёв информации в одну текстуру — стандартная практика. Примером служит упаковка текстур Ambient Occlusion, Roughness, Metallic как красный, зелёный и синий каналы одной текстуры. Чтобы построить суффикс для таких текстур, просто последовательно запишите суффиксы отдельных масок из таблицы выше, напр. `_ORM`.

> Часто альфа-канал включают в карту Diffuse/Альбедо. Так как это стандартная практика, добавлять суффикс `A` в суффикс `_D` необязательно.

Упаковывать сразу 4 канала информации в одну текстуру (в RGBA) не рекомендуется, за исключением использования канала A как Alpha вместе с картой Diffuse/Альбедо.

<a name="anc-misc"></a>
<a name="1.2.7"></a>
### Разное 

| Тип ассета (RU)         | Тип ассета (EN)         | Префикс    | Суффикс    | Примечания                       |
| ----------------------- | ----------------------- | ---------- | ---------- | -------------------------------- |
| Композиция звуков       | Sound Cue               | A_         | _Cue       |                                  |
| Микс звуков             | Sound Mix               | Mix_       |            |                                  |
| Звукозапись             | Sound Wave              | A_         |            |                                  |
| Таблица данных          | Data Table              | DT_        |            |                                  |
| Тип растительности      | Foliage Type            | FT_        |            |                                  |
| Тип растительности      | Landscape Grass Type    | LG_        |            |                                  |
| Слой ландшафта          | Landscape Layer         | LL_        |            |                                  |
| Виджет-блупринт         | Widget Blueprint        | WBP_       |            |                                  |


### 1.3 Требования к текстурам. Правильная настройка текстур. 

> 1. Текстуры должны строго соответствовать вышеприведенным правилам именования.
> 2. Текстуры должны быть переведены в режим Virtual Texture.
> 3. Разрешение текстур должно строиться по приципу кратности степени 2, т.е. 128, 256, 512, 1024, 2048 и т.д.
> 4. Идеальным является соотношение сторон 1 к 1,(прим. 1024х1024) но допускается 1 к 2, 1 к 4 (прим. 512х1024 или 1024 х 4096).
> 5. Текстуры, несущие в себе не цветовую информацию (GreyScale, Linear Color), такие как карта шерховатости, металлик, либо >упакованные карты (_ORM, _EDO) должны быть включены как Virtual Linear Color (в параметрах текстуры отключен чекбокс sRGB)


<a name="2"></a>
<a name="structure"></a>
## 2. Структура папок проекта ![#](https://img.shields.io/badge/lint-partial_support-yellow.svg)
